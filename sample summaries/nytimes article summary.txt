WASHINGTON — Defense Secretary Jim Mattis, whose experience and stability were widely seen as a balance to an unpredictable president, resigned on Thursday in protest of President Trump’s decision to withdraw 2,000 American troops from Syria.

Officials said Mr. Mattis went to the White House on Thursday afternoon in a last attempt to convince Mr. Trump to keep American troops in Syria, where they have been fighting the Islamic State.

He called Mr. Mattis “an island of stability amidst the chaos of the Trump administration.”

“As we’ve seen with the President’s haphazard approach to Syria, our national defense is too important to be subjected to the President’s erratic whims,” Mr. Warner wrote in the Twitter post.

Mr. Mattis had told close friends that he would continue in the job despite his deteriorating relationship with Mr. Trump, because he viewed his commitment to protecting the Defense Department and its 1.3 million active duty service members as paramount.

Senator Marco Rubio, Republican of Florida and member of the Senate Foreign Relations Committee, said on Twitter that Mr. Mattis’s resignation letter “makes it abundantly clear that we are headed towards a series of grave policy errors which will endanger our nation, damage our alliances & empower our adversaries.”

As defense secretary, Mr. Mattis oversaw the world’s most powerful military, supervising active-duty troops based in the United States and deployed worldwide, including in war zones in Afghanistan, Iraq and on the Saudi border with Yemen.

Over the past six months, the president and the defense chief have also found themselves at odds over NATO policy, whether to resume large-scale military exercises with South Korea and, privately, whether Mr. Trump’s decision to withdraw the United States from the Iran nuclear deal has proved effective.

The president’s tweets announcing the departure of his defense secretary shocked officials at the Pentagon, who as recently as Thursday afternoon were insisting that Mr. Mattis had no intention of resigning his post, despite his anger at Mr. Trump’s decision, announced on Wednesday, to withdraw American troops from Syria.

Mr. Trump announced Mr. Mattis’s resignation in two tweets Thursday evening, and said the retired four-star Marine general turned Pentagon chief will leave at the end of February.